package com;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.text.SimpleDateFormat;
import java.util.Date;

public class DailyFolderUpdater {
    public static void main(String[] args) {
        // Define the desktop path
        String desktopPath = System.getProperty("user.home") + "\\Desktop";
        Path todayFolderPath = Paths.get(desktopPath, "TODAY");

        // Define the destination path
        String destinationPath = "F:\\SAIRAM\\";
        Path destinationDirPath = Paths.get(destinationPath);

        // Ensure the destination directory exists
        try {
            if (!Files.exists(destinationDirPath)) {
                Files.createDirectories(destinationDirPath);
                System.out.println("Destination directory created: " + destinationPath);
            }
        } catch (IOException e) {
            System.err.println("Failed to create destination directory: " + destinationPath);
            e.printStackTrace();
            return;
        }

        // Check if the "TODAY" folder exists
        if (Files.exists(todayFolderPath)) {
            // Get the current date in dd-MM-yyyy format
            String formattedDate = new SimpleDateFormat("dd-MM-yyyy").format(new Date());

            // Define the new folder name
            Path newFolderPath = Paths.get(destinationPath, formattedDate);

            // Rename and move the folder
            try {
                Files.move(todayFolderPath, newFolderPath);
                System.out.println("Folder renamed and moved to: " + newFolderPath.toAbsolutePath());
            } catch (IOException e) {
                System.err.println("Failed to rename and move folder.");
                e.printStackTrace();
            }
        } else {
            System.err.println("The 'TODAY' folder does not exist: " + todayFolderPath.toAbsolutePath());
        }

        // Create a new "TODAY" folder
        Path newTodayFolderPath = Paths.get(desktopPath, "TODAY");
        try {
            if (!Files.exists(newTodayFolderPath)) {
                Files.createDirectory(newTodayFolderPath);
                System.out.println("New 'TODAY' folder created.");
            }
        } catch (IOException e) {
            System.err.println("Failed to create 'TODAY' folder.");
            e.printStackTrace();
        }

        // Create a "BACKUP" subfolder inside the new "TODAY" folder
        Path backupFolderPath = newTodayFolderPath.resolve("BACKUP");
        try {
            if (!Files.exists(backupFolderPath)) {
                Files.createDirectory(backupFolderPath);
                System.out.println("New 'BACKUP' folder created inside 'TODAY'.");
            }
        } catch (IOException e) {
            System.err.println("Failed to create 'BACKUP' folder inside 'TODAY'.");
            e.printStackTrace();
        }
    }
}