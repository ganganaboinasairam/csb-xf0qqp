function convertDivs() {
    const fileInput = document.getElementById('jspFile');
    const resultDiv = document.getElementById('result');

    if (fileInput.files.length === 0) {
        alert("Please select a JSP file.");
        return;
    }

    const file = fileInput.files[0];
    readFile(file).then(content => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(content, 'text/html');

        // Convert divs with class 'Tab'
        const tabDivs = doc.querySelectorAll('.Tab');
        if (tabDivs.length === 0) {
            alert("No divs with class 'Tab' found in the JSP file.");
            return;
        }

        tabDivs.forEach((tabDiv, index) => {
            const title = tabDiv.getAttribute('title');
            if (title) {
                const outputDiv = createOutputDiv(tabDiv, title, index + 1);
                tabDiv.parentNode.replaceChild(outputDiv, tabDiv);
            }
        });

        // Add additional script and style
        const head = doc.querySelector('head') || doc.createElement('head');
        
        if (!doc.querySelector('head')) {
            doc.documentElement.insertBefore(head, doc.documentElement.firstChild);
        }

        const style = doc.createElement('style');
        style.textContent = `
            /* Add your custom styles here */
            .accordion {
                cursor: pointer;
                border: 1px solid #ddd;
                margin-bottom: 10px;
                padding: 10px;
                background-color: #f4f4f4;
            }
            .panel {
                display: none;
                padding: 10px;
                border: 1px solid #ddd;
                border-top: none;
            }
        `;
        head.appendChild(style);

        const script = doc.createElement('script');
        script.textContent = `
            function callMe(element) {
                const panel = element.nextElementSibling.nextElementSibling;
                const upArrow = element.querySelector('#mainTab_UpArrow');
                const downArrow = element.querySelector('#mainTab_DownArrow');

                if (panel.style.display === 'block') {
                    panel.style.display = 'none';
                    upArrow.style.display = 'block';
                    downArrow.style.display = 'none';
                } else {
                    panel.style.display = 'block';
                    upArrow.style.display = 'none';
                    downArrow.style.display = 'block';
                }
            }
        `;
        head.appendChild(script);

        resultDiv.innerHTML = `<pre>${escapeHtml(doc.documentElement.outerHTML)}</pre>`;
    }).catch(error => {
        console.error('Error reading file:', error);
    });
}