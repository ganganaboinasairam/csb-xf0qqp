public void getFiles(String remotePath) {
    try {
        connect();
        
        // Log the path being accessed
        logger.info("Attempting to access remote path: " + remotePath);
        
        // Get the list of files and directories
        Vector<ChannelSftp.LsEntry> fileList = sftpChannel.ls(remotePath);
        
        for (ChannelSftp.LsEntry fileEntry : fileList) {
            String fileName = fileEntry.getFilename();
            String fullRemotePath = remotePath + (remotePath.endsWith("/") ? "" : "/") + fileName; // Correctly build the full path

            // Log each entry found
            logger.info("Found entry: " + fileName + " at " + fullRemotePath);

            if (fileEntry.getAttrs().isDir()) {
                // Skip "." and ".."
                if (!fileName.equals(".") && !fileName.equals("..")) {
                    getFiles(fullRemotePath);  // Recursively get files from subdirectory
                }
            } else {
                // Download the file
                try {
                    logger.info("Downloading file: " + fullRemotePath);
                    sftpChannel.get(fullRemotePath, localDirectory + "/" + fileName);
                } catch (SftpException e) {
                    logger.severe("Failed to download file: " + fullRemotePath + " - " + e.getMessage());
                }
            }
        }
    } catch (SftpException e) {
        logger.severe("Failed to get files from SFTP: " + e.getMessage());
    } catch (Exception e) {
        logger.severe("Error in getFiles: " + e.getMessage());
    } finally {
        disconnect();
    }
}