$(document).ready(function() {
    var viewDivId = "";

    // Function to handle manual checkbox clicks
    function updateSelectAll() {
        // Determine viewDivId based on session storage value
        if (sessionStorage.getItem('viewAuthINOC') == "L") {
            viewDivId = "#id_getTranCata input[name=_Sel_CheckBox]";
        } else if (sessionStorage.getItem('viewAuthINOC') == "C") {
            viewDivId = "#Oct_Ammend input[name=_Sel_CheckBox]";
        }

        // Check if all checkboxes are checked, update selectAll checkbox accordingly
        var allChecked = $(viewDivId).length === $(viewDivId + ":checked").length;
        $('#selectAll').prop('checked', allChecked);
    }

    // Handle selectAll checkbox click
    $('#selectAll').change(function() {
        var check = this.checked; // Select all checkbox state

        // Determine viewDivId based on session storage value
        if (sessionStorage.getItem('viewAuthINOC') == "L") {
            viewDivId = "#id_getTranCata input[name=_Sel_CheckBox]";
        } else if (sessionStorage.getItem('viewAuthINOC') == "C") {
            viewDivId = "#Oct_Ammend input[name=_Sel_CheckBox]";
        }

        // Check/uncheck all individual checkboxes
        $(viewDivId).prop('checked', check);

        if (check) {
            $("input[name=_Authorize]").attr("onclick", "CheckAuthorizeReference()");
        }

        // Update reject button and view inputs
        if (totalRecordNum == 1 || !check) {
            $('#rejectBtn').show();
            $("input[name=_View]").hide();
        } else {
            $('#rejectBtn').hide();
            $("input[name=_View]").hide();
        }
    });

    // Attach change event to individual checkboxes to detect manual clicks
    $(document).on('change', 'input[name=_Sel_CheckBox]', function() {
        updateSelectAll(); // Update the state of selectAll checkbox when any individual checkbox is changed
    });
});