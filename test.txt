function downloadFile() {
    const c_img_indx = document.getElementById('c_img_indx').value;
    const c_main_ref = document.getElementById('c_main_ref').value;

    if (!c_img_indx || !c_main_ref) {
        alert('Please fill out all the fields');
        return;
    }

    // Create the request URL with query parameters
    const url = `/yourApp/downloadImage?c_img_indx=${encodeURIComponent(c_img_indx)}&c_main_ref=${encodeURIComponent(c_main_ref)}`;

    // Use fetch to send the request to the servlet
    fetch(url, {
        method: 'GET'
    })
    .then(response => {
        if (response.ok) {
            return response.blob();  // Get the response as a Blob (binary data)
        } else {
            throw new Error('File not found or unsupported file type');
        }
    })
    .then(blob => {
        // Create a download link for the file
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        const contentType = response.headers.get("Content-Type");
        const extension = contentType.split('/')[1]; // Extract extension from content type
        a.href = url;
        a.download = `file_${c_img_indx}.${extension}`;  // Set the file name with appropriate extension
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);  // Clean up
    })
    .catch(error => {
        alert('Error: ' + error.message);
    });
}