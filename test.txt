package com.cs.ceweb.servlets;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.zip.GZIPInputStream;

import com.cs.eximap.utility.Base64;

public class Base64ToPdf {
    public static void main(String[] args) throws Exception {
        String encodedString = new String(Files.readAllBytes(Paths.get("C:\\Users\\v1013325\\Desktop\\TODAY\\output.txt")));

        System.out.println("Encoded string is " + encodedString);

        // Decode and decompress the Base64 string
        byte[] decodedBytes = decompressByBase64(encodedString);

        // Write the decompressed bytes to a PDF file
        Files.write(Paths.get("C:\\Users\\v1013325\\Desktop\\TODAY\\Document.pdf"), decodedBytes);

        System.out.println("PDF file created successfully.");
    }

    public static byte[] decompressByBase64(String encodedString) throws IOException {
        if (encodedString == null || encodedString.isEmpty()) return null;

        // Decode the Base64 string to get compressed bytes
        byte[] compressedBytes = Base64.decode(encodedString);

        // Decompress the GZIP compressed byte array
        try (ByteArrayInputStream byteStream = new ByteArrayInputStream(compressedBytes);
             GZIPInputStream gzipStream = new GZIPInputStream(byteStream)) {

            // Read decompressed data into a byte array
            return gzipStream.readAllBytes();
        }
    }
}